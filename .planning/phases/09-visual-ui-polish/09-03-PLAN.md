---
phase: 09-visual-ui-polish
plan: 03
type: execute
wave: 1
depends_on: ["09-01"]
files_modified:
  - src/game/scenes/IntersectionScene.ts
autonomous: true

must_haves:
  truths:
    - "Intersection background uses construction paper layered aesthetic instead of flat digital colors"
    - "Road is dark asphalt-colored paper with visible paper texture grain"
    - "Lane markings are masking tape strips (white, slightly ragged edges) not painted lines"
    - "Sidewalks are lighter construction paper with visible texture"
    - "Grass/ground areas are construction paper green (muted, not digital)"
    - "Crosswalks are masking tape strips"
    - "Corner areas have simple paper cutout environmental dressing (at least 2: trees, buildings)"
    - "The entire scene has a low-opacity cardboard fiber grain overlay"
  artifacts:
    - path: "src/game/scenes/IntersectionScene.ts"
      provides: "Rewritten drawIntersection() with paper craft aesthetic"
  key_links:
    - from: "src/game/scenes/IntersectionScene.ts"
      to: "src/game/utils/paperArt.ts"
      via: "Uses drawMaskingTapeStrip, applyPaperGrain, drawScissorCutRect for intersection rendering"
      pattern: "import.*paperArt|drawMaskingTapeStrip|applyPaperGrain"
    - from: "src/game/scenes/IntersectionScene.ts"
      to: "src/game/config/paletteConfig.ts"
      via: "Uses PALETTE colors for all intersection elements"
      pattern: "import.*paletteConfig|PALETTE"
---

<objective>
Transform the intersection from flat digital rectangles to a layered construction paper craft table scene.

Purpose: The intersection is the main gameplay canvas. Converting it to the paper cutout aesthetic transforms the entire visual feel from "programmer art" to "craft table diorama."

Output: drawIntersection() rewritten with construction paper textures, masking tape lane markings, paper grain overlay, and corner environmental dressing.
</objective>

<execution_context>
@/home/scott/.claude/get-shit-done/workflows/execute-plan.md
@/home/scott/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phase-9-design-direction.md
@mockups/paper-mario-style.html
@src/game/scenes/IntersectionScene.ts
@src/game/config/intersectionConfig.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite intersection rendering with paper craft aesthetic</name>
  <files>
    src/game/scenes/IntersectionScene.ts
  </files>
  <action>
Rewrite the `drawIntersection()` method in IntersectionScene.ts. Also add imports for paperArt utilities and PALETTE.

**Add at top of file:**
```typescript
import { PALETTE } from '../config/paletteConfig';
import {
  drawPaperShadow,
  drawScissorCutRect,
  drawMaskingTapeStrip,
  applyPaperGrain,
  drawPopsicleStick,
} from '../utils/paperArt';
```

**Rewrite `drawIntersection()` — layered from back to front:**

1. **Background / sky layer (depth 0):**
   - Fill entire world rect with `PALETTE.skyBlue` (muted blue construction paper sky)
   - Very subtle paper grain on top

2. **Ground / grass layer (depth 1):**
   - Fill corner areas with `PALETTE.grassGreen` using `drawScissorCutRect` for slightly imperfect edges
   - These are the 4 quadrant areas outside the road cross
   - Each corner gets a slightly different shade (vary green by +/- 0x080808) to simulate different sheets of construction paper layered

3. **Sidewalk layer (depth 2):**
   - Draw sidewalk strips along road edges using `PALETTE.sidewalkTan`
   - Use `drawScissorCutRect` for paper-cut edges
   - Slightly lighter than grass, simulating a different sheet of paper

4. **Road layer (depth 3):**
   - Vertical and horizontal road strips in `PALETTE.asphalt`
   - Center intersection box slightly lighter (0x444444)
   - Road should look like dark construction paper

5. **Lane markings (depth 4):**
   - Replace yellow dashed center lines with `drawMaskingTapeStrip()` calls
   - White-ish masking tape with slightly ragged edges
   - Tape strips are longer segments with small gaps (not uniform dashes)

6. **Crosswalks (depth 4):**
   - Crosswalk bars are masking tape strips (wider, white, slightly transparent)
   - Same `drawMaskingTapeStrip()` function

7. **Stop lines (depth 4):**
   - Wider masking tape strips at stop positions

8. **Corner dressing (depth 5) — simple paper cutout props:**
   - **Trees (at least 2 corners):** Draw a brown popsicle-stick trunk + green construction paper circle canopy using `drawScissorCutRect` and `drawPaperShadow`
   - **Buildings (at least 1 corner):** Simple rectangular paper cutout facades with scissor-cut edges, window rectangles cut out (darker interior showing)
   - Keep these simple — 3-4 Graphics calls per prop. They frame the action without cluttering.
   - Place at intersection corner areas, away from gameplay
   - **Idle wobble:** Apply `wobbleSine()` to tree canopies in scene update() — subtle paper-in-breeze effect (amplitude 1-2 degrees)

9. **Global paper grain overlay (depth 200):**
   - Call `applyPaperGrain()` covering the full camera viewport
   - Set scroll factor 0 (stays fixed to camera)
   - Very low alpha (0.03-0.04) — kills digital flatness without being obtrusive

**IMPORTANT — do NOT modify:**
- Any other method in IntersectionScene
- The create() method beyond adding the paperArt imports
- Any game logic, UI creation, car spawning, etc.
- Only touch drawIntersection() and add the grain overlay call in create() after drawIntersection()
  </action>
  <verify>
`npm run build` succeeds. The drawIntersection method uses PALETTE colors and paperArt utilities. Lane markings use masking tape strips. Corner dressing exists. Paper grain overlay is applied.
  </verify>
  <done>
Intersection renders as a layered construction paper scene with masking tape lane markings, paper grain overlay, and corner environmental dressing (trees, buildings).
  </done>
</task>

</tasks>

<verification>
- Intersection background is construction paper layers (sky, grass, sidewalk, road)
- Lane markings are white masking tape strips with slightly ragged edges
- Crosswalks and stop lines are masking tape
- At least 2 corners have environmental dressing (trees, buildings)
- Global paper grain overlay is visible but subtle (alpha ~0.04)
- All colors come from PALETTE (no hardcoded hex values in drawIntersection)
- No game logic is affected — only visual rendering changed
- No TypeScript errors, build succeeds
</verification>

<success_criteria>
The intersection looks like a construction paper diorama on a craft table, not a digital simulation.
</success_criteria>

<output>
After completion, create `.planning/phases/09-visual-ui-polish/09-03-SUMMARY.md`
</output>
