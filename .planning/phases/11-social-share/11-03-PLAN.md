---
phase: 11-social-share
plan: 03
type: execute
wave: 2
depends_on: ["11-01"]
files_modified:
  - src/layouts/Layout.astro
  - public/og-image.png
autonomous: true

must_haves:
  truths:
    - "When honkfordemocracy.org URL is shared on social media, a preview card with image, title, and description appears"
    - "OG image is a static 1200x630 image matching the protest aesthetic"
  artifacts:
    - path: "src/layouts/Layout.astro"
      provides: "og:image and twitter:image meta tags"
      contains: "og:image"
    - path: "public/og-image.png"
      provides: "Static OG preview image for social media link previews"
  key_links:
    - from: "src/layouts/Layout.astro"
      to: "public/og-image.png"
      via: "meta property og:image content"
      pattern: "og:image"
---

<objective>
Add OG meta tags with a static preview image so when players share the honkfordemocracy.org URL on social media, an attractive preview card appears.

Purpose: When someone shares the game URL (not the generated share card image, but the actual link), social platforms need OG meta tags to render a preview. This is the other half of the viral loop — the share card drives people to visit, and the OG preview makes the link look good when pasted.

Output: OG image + meta tags in Layout.astro
</objective>

<execution_context>
@/home/scott/.claude/get-shit-done/workflows/execute-plan.md
@/home/scott/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/layouts/Layout.astro
@src/game/config/paletteConfig.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate static OG image and add meta tags</name>
  <files>public/og-image.png, src/layouts/Layout.astro</files>
  <action>
**Part A: Generate OG image (public/og-image.png)**

Create a Node.js script (can be inline or temporary) that uses the `canvas` npm package (node-canvas) to generate a 1200x630 PNG for OG previews. If node-canvas is not available, create the image using a simpler approach:

**Simpler approach (preferred):** Create the OG image by writing a small HTML file, opening it in a headless browser or simply generating it programmatically. Actually, the simplest approach: use the Canvas API in a quick script.

**BUT — even simpler:** Since this is a one-time static asset, manually create it using Canvas in a build script OR just describe what Claude should draw and have it create the PNG directly.

**Recommended approach:** Create a temporary Node script at `scripts/generate-og-image.js` that:
1. `npm install canvas` (dev dependency only — for the build script)
2. Use node-canvas to draw:
   - Background: cardboard color (#c5a059)
   - Paper grain texture (simplified — random short lines like paperArt.ts)
   - Large centered text: "HONK FOR DEMOCRACY" in Impact font (node-canvas won't have Bangers, Impact is fine for static asset), white (#f5f0e8) with black (#1a1a1a) stroke
   - Subtitle: "A Protest Simulator" in 32px, color #fbbf24
   - Bottom: "Craft your sign. Stand your ground." in 24px, color #f5f0e8
   - Hard-offset drop shadow behind main text block
3. Save to `public/og-image.png`
4. Run the script: `node scripts/generate-og-image.js`

**Alternative if node-canvas install is problematic:** Create the image as an SVG converted to PNG, or create a minimal 1200x630 PNG with just the key text/colors using any available tool. The key requirement is: it exists at `public/og-image.png`, is 1200x630, has the protest aesthetic, and shows the game name.

**Part B: Update Layout.astro meta tags**

The Layout already has OG tags but is MISSING og:image and twitter:image. Add these:

```html
<meta property="og:image" content="/og-image.png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:type" content="image/png" />
<meta name="twitter:image" content="/og-image.png" />
```

Add these right after the existing `og:site_name` meta tag and before the existing `twitter:card` tag.

Note: The content path `/og-image.png` works because Astro serves files from public/ at the root. In production, this should ideally be an absolute URL (https://honkfordemocracy.org/og-image.png) but the relative path works for most social platforms. If the site has a known production URL, use the absolute URL instead.

Also add `og:url` meta tag if not present:
```html
<meta property="og:url" content="https://honkfordemocracy.org" />
```
  </action>
  <verify>
- OG image exists: ls -la public/og-image.png
- Image is correct size: file public/og-image.png (should show 1200x630 or similar)
- Meta tags present: grep "og:image" src/layouts/Layout.astro
- TypeScript/Astro compiles: npx astro check (or build check)
  </verify>
  <done>public/og-image.png exists as a 1200x630 protest-themed preview image. Layout.astro has og:image, og:image:width, og:image:height, twitter:image meta tags pointing to it.</done>
</task>

</tasks>

<verification>
- public/og-image.png exists and is 1200x630
- Layout.astro has og:image meta tag
- Layout.astro has twitter:image meta tag
- No build errors
</verification>

<success_criteria>
- Sharing honkfordemocracy.org URL on Twitter/Facebook/Discord shows a preview card with the OG image
- OG image is on-brand (cardboard background, game title, protest aesthetic)
- Meta tags include dimensions for proper rendering
</success_criteria>

<output>
After completion, create `.planning/phases/11-social-share/11-03-SUMMARY.md`
</output>
