---
phase: 13-sign-craft-ux-redesign
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/game/config/signConfig.ts
  - src/lib/signMaterials.ts
  - src/lib/signDecorations.ts
  - src/layouts/Layout.astro
autonomous: true

must_haves:
  truths:
    - "13 material swatches are defined with distinct IDs and visual properties"
    - "8 fonts are defined and loaded via Google Fonts"
    - "9 text colors are defined"
    - "Tape decorations are removed from exports"
    - "Preset messages array exists for randomize feature"
  artifacts:
    - path: "src/game/config/signConfig.ts"
      provides: "Expanded SIGN_MATERIALS (13), SIGN_FONTS (8), SIGN_COLORS (9), PRESET_MESSAGES (15)"
      contains: "PRESET_MESSAGES"
    - path: "src/lib/signMaterials.ts"
      provides: "Color variant texture generation for cardboard, posterboard, foam, wood"
      contains: "cardboard-red"
    - path: "src/lib/signDecorations.ts"
      provides: "Sticker-only decorations (tape removed)"
    - path: "src/layouts/Layout.astro"
      provides: "Google Fonts link including Bungee, Caveat, Fredoka, Protest Guerrilla, Rubik Mono One, Shrikhand"
      contains: "Shrikhand"
  key_links:
    - from: "src/game/config/signConfig.ts"
      to: "src/lib/signMaterials.ts"
      via: "material IDs match between config and texture generator"
      pattern: "generateMaterialTexture.*cardboard-red"
---

<objective>
Expand the sign config data layer to support 13 material swatches, 8 fonts, 9 colors, and 15 preset messages. Remove tape decorations. Load new Google Fonts.

Purpose: All downstream UI work (Plans 02-03) depends on this expanded data. Separating data from UI keeps each plan focused.
Output: Updated config, materials, decorations, and font loading — no scene changes yet.
</objective>

<execution_context>
@/home/scott/.claude/get-shit-done/workflows/execute-plan.md
@/home/scott/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-sign-craft-ux-redesign/CONTEXT.md
@mockups/sign-craft-redesign.html
@src/game/config/signConfig.ts
@src/lib/signMaterials.ts
@src/lib/signDecorations.ts
@src/lib/signEditor.ts
@src/layouts/Layout.astro
</context>

<tasks>

<task type="auto">
  <name>Task 1: Expand signConfig with 13 materials, 8 fonts, 9 colors, preset messages</name>
  <files>src/game/config/signConfig.ts</files>
  <action>
Expand `SIGN_MATERIALS` array from 4 to 13 entries. Each material needs a unique `id`, `label`, `boardColor`, `strokeColor`, `textColor`, `fatigueMultiplier`, `durability`, and `styleLabel`. Add a `baseColor` field to `SignMaterial` interface (hex string for CSS background, used by the UI swatch rendering).

Material variants per the mockup (13 total):
- **Cardboard (4):** `cardboard` (kraft #c4956a), `cardboard-red` (#b85c4a), `cardboard-blue` (#6a8fb8), `cardboard-green` (#7a9a6a). All fatigueMultiplier: 0.8, durability: 0.6.
- **Posterboard (4):** `posterboard` (white #f5f0e8), `posterboard-yellow` (#fbbf24), `posterboard-pink` (#f472b6), `posterboard-sky` (#7dd3fc). All fatigueMultiplier: 1.0, durability: 1.0.
- **Foam Board (3):** `foamboard` (white #e8e8e8), `foamboard-green` (#86efac), `foamboard-purple` (#c4b5fd). All fatigueMultiplier: 1.4, durability: 1.6.
- **Wood Plank (2):** `wood` (light, linear-gradient #DEB887->#B8860B), `wood-dark` (linear-gradient #8B7355->#5C4033). All fatigueMultiplier: 1.8, durability: 2.0.

Replace `SIGN_FONTS` array with 8 fonts:
`['Bangers', 'Permanent Marker', 'Bungee', 'Caveat', 'Fredoka', 'Protest Guerrilla', 'Rubik Mono One', 'Shrikhand']`

Replace `SIGN_COLORS` array with 9 colors:
`['#1a1a1a', '#FFFFFF', '#DC143C', '#1E90FF', '#228B22', '#fbbf24', '#FF8C00', '#8B008B', '#FF1493']`
(Black, White, Red, Blue, Green, Yellow, Orange, Purple, Hot Pink)

Add a new exported constant `PRESET_MESSAGES`:
```typescript
export const PRESET_MESSAGES = [
  'HONK FOR DEMOCRACY', 'HONK IF YOU CARE', 'RESIST', 'PEOPLE OVER PROFIT',
  'WE THE PEOPLE', 'NOT ON OUR WATCH', 'USE YOUR VOICE', 'STAND UP SPEAK OUT',
  'ACCOUNTABILITY NOW', 'PROTECT OUR RIGHTS', 'NO KINGS', 'POWER TO THE PEOPLE',
  'ENOUGH IS ENOUGH', 'HONK HONK HONK', 'DEMOCRACY IS NOT A SPECTATOR SPORT',
];
```

Add a helper to group materials by base type:
```typescript
export type MaterialGroup = { label: string; emoji: string; materials: SignMaterial[] };
export function getMaterialGroups(): MaterialGroup[] {
  return [
    { label: 'Cardboard', emoji: '\uD83D\uDCE6', materials: SIGN_MATERIALS.filter(m => m.id.startsWith('cardboard')) },
    { label: 'Posterboard', emoji: '\uD83C\uDFA8', materials: SIGN_MATERIALS.filter(m => m.id.startsWith('posterboard')) },
    { label: 'Foam Board', emoji: '\uD83E\uDDCA', materials: SIGN_MATERIALS.filter(m => m.id.startsWith('foamboard')) },
    { label: 'Wood Plank', emoji: '\uD83E\uDEB5', materials: SIGN_MATERIALS.filter(m => m.id.startsWith('wood')) },
  ];
}
```

Update `DEFAULT_SIGN_DATA` to use new first font/color if indices changed. Keep `getSignMaterial()` and scoring functions unchanged.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -i signConfig` — no new type errors. Grep for `PRESET_MESSAGES` and `getMaterialGroups` in the file to confirm exports exist.</verify>
  <done>signConfig.ts exports 13 materials, 8 fonts, 9 colors, 15 preset messages, and getMaterialGroups helper. All types compile.</done>
</task>

<task type="auto">
  <name>Task 2: Add color variant texture generation and remove tape</name>
  <files>src/lib/signMaterials.ts, src/lib/signDecorations.ts</files>
  <action>
**signMaterials.ts:** Update `generateMaterialTexture()` switch statement to handle all 13 material IDs.

Color variant approach:
- `cardboard-red`, `cardboard-blue`, `cardboard-green`: Same `drawCardboard` logic but with tinted base color. Add a `drawCardboardVariant(ctx, w, h, baseHex)` function that takes the base color as parameter. Use the hex colors from the config: red=#b85c4a, blue=#6a8fb8, green=#7a9a6a. Darken the grain lines to 15% opacity of a darker shade of the base. Keep noise and jagged border.
- `posterboard-yellow`, `posterboard-pink`, `posterboard-sky`: Same `drawPosterboard` logic but with tinted base. Add `drawPosterboardVariant(ctx, w, h, baseHex)`. Colors: yellow=#fbbf24, pink=#f472b6, sky=#7dd3fc. Light paper grain, clean border.
- `foamboard-green`, `foamboard-purple`: Same `drawFoamBoard` logic but with tinted base. Add `drawFoamBoardVariant(ctx, w, h, baseHex)`. Colors: green=#86efac, purple=#c4b5fd. Subtle dots, thick border.
- `wood-dark`: Same `drawWood` logic but with darker palette. Base=#8B7355, grain lines using darker browns (#5C4033, #3B2B1F, #4A3728, #6B5744). Keep knots.

Pattern: Each variant function calls the same drawing logic as the base material but with a different base color parameter. Refactor the existing draw functions to accept an optional `baseColor` parameter rather than duplicating code.

**signDecorations.ts:**
- Remove `TAPE_DUCT`, `TAPE_WASHI`, `TAPE_MASKING` constants entirely.
- Set `DECORATIONS` to an empty array (no SVG decorations used — stickers are emoji-based via `EMOJI_CATEGORIES` which remain unchanged).
- Keep `DecorationDef` interface and `getDecorationsByCategory()` for backward compatibility, but they'll return empty results for 'tape'.
- Remove the `'tape'` category concept from the file comment/docs.
  </action>
  <verify>Run `npx tsc --noEmit 2>&1 | grep -E "signMaterials|signDecorations"` — no type errors. Verify `generateMaterialTexture('cardboard-red', 100, 100)` would hit the new case (check switch has all 13 cases or uses a mapping approach).</verify>
  <done>All 13 material IDs produce distinct textures. Tape decorations removed. EMOJI_CATEGORIES unchanged.</done>
</task>

<task type="auto">
  <name>Task 3: Load new Google Fonts in Astro layout</name>
  <files>src/layouts/Layout.astro</files>
  <action>
Update the Google Fonts `<link>` tag in `Layout.astro` `<head>` to include all 8 sign fonts plus Patrick Hand (used for UI text).

Replace the existing Google Fonts link:
```
<link href="https://fonts.googleapis.com/css2?family=Bangers&family=Patrick+Hand&family=Permanent+Marker&display=swap" rel="stylesheet" />
```

With (matching the mockup's font loading):
```
<link href="https://fonts.googleapis.com/css2?family=Bangers&family=Bungee&family=Caveat:wght@700&family=Fredoka:wght@600&family=Patrick+Hand&family=Permanent+Marker&family=Protest+Guerrilla&family=Rubik+Mono+One&family=Shrikhand&display=swap" rel="stylesheet" />
```

This adds: Bungee, Caveat (weight 700), Fredoka (weight 600), Protest Guerrilla, Rubik Mono One, Shrikhand. Keeps existing: Bangers, Patrick Hand, Permanent Marker.

Also update the `preloadGoogleFont()` method in `src/lib/signEditor.ts` — update the `googleFonts` array to include all new fonts that need preloading: `['Permanent Marker', 'Bangers', 'Rubik Mono One', 'Bungee', 'Caveat', 'Fredoka', 'Protest Guerrilla', 'Shrikhand']`. Since the fonts are already loaded via the Layout link tag, this is a fallback/redundancy. The signEditor file is NOT listed in files_modified since the scene rewrite in Plan 02 will handle this — but DO update it here since it's a data-layer concern.

Actually, add `src/lib/signEditor.ts` to the scope: just update the `googleFonts` array in the constructor to list all 8 fonts. Nothing else changes in signEditor.ts.
  </action>
  <verify>Check Layout.astro contains "Shrikhand" and "Protest+Guerrilla" in the fonts link. Check signEditor.ts googleFonts array has 8 entries.</verify>
  <done>All 8 sign fonts load via Google Fonts in the Astro layout. SignEditor preloads all 8 as fallback.</done>
</task>

</tasks>

<verification>
- `npx tsc --noEmit` passes (or only pre-existing errors in unrelated files)
- `signConfig.ts` exports: 13 SIGN_MATERIALS, 8 SIGN_FONTS, 9 SIGN_COLORS, 15 PRESET_MESSAGES, getMaterialGroups()
- `signMaterials.ts` handles all 13 material IDs in generateMaterialTexture()
- `signDecorations.ts` has no tape references in DECORATIONS array
- Layout.astro loads all required Google Fonts
</verification>

<success_criteria>
All config data expanded and compilable. No UI changes yet — the existing SignCraftScene still works (it only uses the first entries of each array). New material IDs produce textures. Tape removed. Fonts load.
</success_criteria>

<output>
After completion, create `.planning/phases/13-sign-craft-ux-redesign/13-01-SUMMARY.md`
</output>
