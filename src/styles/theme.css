/* ============================================================
 * Honk For Democracy — Neobrutalist Paper Mario Theme
 * ============================================================
 * Single source of truth for all DOM overlay styling.
 * Phaser-side uses paletteConfig.ts (hex numbers).
 * DOM overlays (SignCraft, Score, Activism, Menus) use THIS.
 *
 * HOW TO USE:
 *   1. Import in global.css:  @import './theme.css';
 *   2. Apply classes to DOM elements in scene overlays
 *   3. NEVER hardcode #1a1a1a, 3px solid, 4px 4px 0, font-family
 *      in scene files — use these classes or variables instead.
 *
 * CLASSES vs VARIABLES:
 *   - Use classes (.panel, .btn-primary) for complete components
 *   - Use variables (var(--border), var(--shadow)) when building
 *     custom one-off elements that don't fit a class
 * ============================================================ */

/* ===== DESIGN TOKENS ===== */
:root {
  /* --- Palette (mirrors paletteConfig.ts) --- */
  --black:            #1a1a1a;
  --yellow:           #fbbf24;
  --kraft:            #c5a059;
  --kraft-light:      #d4b06a;
  --kraft-dark:       #a3824f;
  --kraft-darker:     #8b6e3f;
  --paper-white:      #f5f0e8;
  --paper:            rgba(245, 240, 232, 0.75);
  --asphalt:          #3a3a3a;
  --red:              #ef4444;
  --green:            #22c55e;
  --blue:             #3b82f6;
  --craft-brown:      #92400e;

  /* --- Typography --- */
  --font-ui:          'Bangers', cursive;
  --font-body:        'Patrick Hand', cursive;
  --font-marker:      'Permanent Marker', cursive;

  /* --- Borders & Shadows (the neobrutalist DNA) --- */
  --border:           3px solid var(--black);
  --border-sm:        2px solid var(--black);
  --border-subtle:    1px solid rgba(26, 26, 26, 0.15);
  --shadow:           4px 4px 0 rgba(0, 0, 0, 0.4);
  --shadow-sm:        2px 2px 0 rgba(0, 0, 0, 0.35);
  --shadow-hard:      4px 4px 0 var(--black);
  --shadow-subtle:    1px 1px 0 rgba(26, 26, 26, 0.15);
  --radius:           4px;

  /* --- Kraft Background (reusable SVG noise + gradient) --- */
  --kraft-bg:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='g'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='4' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23g)' opacity='0.12'/%3E%3C/svg%3E"),
    linear-gradient(135deg, #b8956a 0%, #a3824f 30%, #c5a059 60%, #b8956a 100%);
  --kraft-bg-size:    300px 300px, 100% 100%;

  /* --- Transitions --- */
  --transition-press: transform 0.1s, box-shadow 0.1s;
}


/* ===== NEOBRUTALIST PRIMITIVES ===== */

/* Paper cutout — the core visual building block.
 * Use on: panels, cards, sign preview, control containers.
 * Black border + hard offset shadow = Paper Mario DNA. */
.paper-cut {
  border: var(--border);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
}

/* Smaller paper cutout — for swatches, small cards, inline elements. */
.paper-cut-sm {
  border: var(--border-sm);
  box-shadow: var(--shadow-sm);
  border-radius: var(--radius);
}

/* Masking tape strip — for labels, badges, category headers.
 * Translucent paper white, subtle border. The "tag" of the design system. */
.tape-strip {
  background: var(--paper);
  border: var(--border-subtle);
  box-shadow: var(--shadow-subtle);
  padding: 0.3rem 1rem;
  font-family: var(--font-ui);
  font-size: 0.75rem;
  letter-spacing: 0.15em;
  text-transform: uppercase;
}


/* ===== PANELS ===== */

/* Main content panel — paper-white background, paper-cut border.
 * Use on: control panels, dialogs, score overlays. */
.panel {
  background: var(--paper-white);
  border: var(--border);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
  padding: 1rem;
}

/* Panel on kraft — kraft background, paper-cut border.
 * Use on: secondary panels, sign preview containers. */
.panel-kraft {
  background: var(--kraft);
  border: var(--border);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
  padding: 1rem;
}

/* Panel header — section title inside a panel. */
.panel-header {
  font-family: var(--font-ui);
  font-size: 1rem;
  font-weight: 400;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: var(--black);
  margin-bottom: 0.75rem;
}


/* ===== BUTTONS ===== */

/* Primary button — yellow CTA, neobrutalist press effect.
 * Use on: START PROTESTING, main CTAs. */
.btn-primary {
  font-family: var(--font-ui);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.8rem 1.5rem;
  font-size: 1.1rem;
  font-weight: 400;
  color: var(--black);
  background: var(--yellow);
  border: var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-hard);
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: var(--transition-press);
  text-transform: uppercase;
  text-decoration: none;
  -webkit-user-select: none;
  user-select: none;
}

.btn-primary:hover {
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0 var(--black);
}

.btn-primary:active {
  transform: translate(4px, 4px);
  box-shadow: 0 0 0 var(--black);
}

/* Secondary button — paper white, less prominent.
 * Use on: RANDOMIZE, secondary actions. */
.btn-secondary {
  font-family: var(--font-ui);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.8rem 1.5rem;
  font-size: 1.1rem;
  font-weight: 400;
  color: var(--black);
  background: var(--paper-white);
  border: var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow-hard);
  letter-spacing: 0.08em;
  cursor: pointer;
  transition: var(--transition-press);
  text-transform: uppercase;
  -webkit-user-select: none;
  user-select: none;
}

.btn-secondary:hover {
  transform: translate(2px, 2px);
  box-shadow: 2px 2px 0 var(--black);
}

.btn-secondary:active {
  transform: translate(4px, 4px);
  box-shadow: 0 0 0 var(--black);
}

/* Small button — for inline actions, tab-like controls. */
.btn-sm {
  padding: 0.4rem 0.8rem;
  font-size: 0.85rem;
}


/* ===== TABS ===== */

/* Tab bar container. */
.tab-bar {
  display: flex;
  gap: 0;
  border-bottom: var(--border);
  margin-bottom: 1rem;
}

/* Individual tab. */
.tab {
  font-family: var(--font-ui);
  font-size: 0.9rem;
  font-weight: 400;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  padding: 0.6rem 1rem;
  cursor: pointer;
  border: var(--border);
  border-bottom: none;
  border-radius: var(--radius) var(--radius) 0 0;
  background: var(--kraft-light);
  color: var(--asphalt);
  margin-right: -3px; /* overlap borders */
  transition: background 0.15s;
  -webkit-user-select: none;
  user-select: none;
}

.tab:hover {
  background: var(--kraft);
}

.tab.active {
  background: var(--paper-white);
  color: var(--black);
  border-bottom: 3px solid var(--paper-white); /* cover container border */
  margin-bottom: -3px;
  z-index: 1;
}

/* Tab step number — small circled number inside tab. */
.tab-number {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--yellow);
  border: 2px solid var(--black);
  font-size: 0.7rem;
  margin-right: 0.4rem;
  vertical-align: middle;
}


/* ===== SWATCHES ===== */

/* Swatch grid container. */
.swatch-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

/* Individual swatch — color/material picker item. */
.swatch {
  width: 40px;
  height: 40px;
  border: var(--border-sm);
  border-radius: var(--radius);
  cursor: pointer;
  transition: transform 0.1s;
}

.swatch:hover {
  transform: scale(1.1);
}

.swatch.selected {
  border-color: var(--yellow);
  box-shadow: 0 0 0 2px var(--black), var(--shadow-sm);
  transform: scale(1.1);
}

/* Swatch category label. */
.swatch-label {
  font-family: var(--font-body);
  font-size: 0.8rem;
  color: var(--asphalt);
  margin: 0.5rem 0 0.25rem;
}


/* ===== FORM ELEMENTS ===== */

/* Text input / textarea — paper-white, marker border. */
.input {
  font-family: var(--font-body);
  font-size: 1rem;
  color: var(--black);
  background: var(--paper-white);
  border: var(--border-sm);
  border-radius: var(--radius);
  padding: 0.6rem 0.8rem;
  width: 100%;
  outline: none;
}

.input:focus {
  box-shadow: var(--shadow-sm);
}

/* Character counter. */
.char-count {
  font-family: var(--font-body);
  font-size: 0.75rem;
  color: var(--asphalt);
  text-align: right;
  margin-top: 0.25rem;
}

.char-count.warning {
  color: var(--red);
}


/* ===== HELPER TEXT ===== */

/* Hint text — orientation, tutorials, descriptions. */
.hint {
  font-family: var(--font-body);
  font-size: 0.8rem;
  color: var(--asphalt);
  line-height: 1.4;
}

/* Section label — bold marker-style heading. */
.section-label {
  font-family: var(--font-ui);
  font-size: 0.85rem;
  font-weight: 400;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--black);
  margin-bottom: 0.5rem;
}


/* ===== OVERLAY LAYOUT ===== */

/* Full-screen overlay for DOM scenes (SignCraft, Score, etc).
 * Covers the Phaser canvas. Kraft background. */
.scene-overlay {
  position: absolute;
  inset: 0;
  z-index: 10;
  background: var(--kraft);
  background-image: var(--kraft-bg);
  background-size: var(--kraft-bg-size);
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

/* Two-column layout for desktop scenes. */
.scene-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
  padding: 1rem;
  max-width: 960px;
  margin: 0 auto;
  min-height: 100%;
}

@media (min-width: 768px) {
  .scene-layout {
    grid-template-columns: minmax(0, 520px) minmax(0, 360px);
    align-items: start;
    padding: 2rem;
  }
}

/* Sticky sign preview (left column on desktop, top on mobile). */
.sign-preview-col {
  position: relative;
}

@media (min-width: 768px) {
  .sign-preview-col {
    position: sticky;
    top: 2rem;
  }
}

/* Controls column (right column on desktop, below on mobile). */
.controls-col {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}


/* ===== SIGN PREVIEW ===== */

/* Sign preview container — the actual protest sign display. */
.sign-preview {
  aspect-ratio: 4 / 3;
  width: 100%;
  max-width: 520px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 2rem;
  border: var(--border);
  box-shadow: var(--shadow);
  border-radius: var(--radius);
  position: relative;
  overflow: hidden;
}

/* Action buttons row — RANDOMIZE + START PROTESTING side by side. */
.sign-actions {
  display: flex;
  gap: 0.75rem;
  margin-top: 0.75rem;
}

.sign-actions .btn-primary,
.sign-actions .btn-secondary {
  flex: 1;
}
